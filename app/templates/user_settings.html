{% extends "base.html" %}

{% block title %} {{ current_user.username }} {% endblock %}

{% block app_content %}

<form action="" method="post" novalidate>
    {{form.hidden_tag()}}

<h1>User settings: {{ current_user.username }}</h1>

    {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul>
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    {% endwith %}

<hr>

<div class="form-row">

    <div class="form-group col">
        {{ form.new_username.label }}
        {{ form.new_username(size=32, class="form-control", value=current_user.username) }}
        {% for error in form.new_username.errors %}
        <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form.new_email.label }}
        {{ form.new_email(size=32, class="form-control", value=current_user.email) }}
        {% for error in form.new_email.errors %}
        <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </div>

</div>


<div class="form-row">

    <div class="form-group col">
        {{ form.new_password.label }}
        {{ form.new_password(size=32, class="form-control") }}
        {% for error in form.new_password.errors %}
        <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </div>

    <div class="form-group col">
        {{ form.new_password2.label }}
        {{ form.new_password2(size=32, class="form-control") }}
        {% for error in form.new_password2.errors %}
        <span style="color: red;">{{ error }}</span>
        {% endfor %}
    </div>

</div>


<hr/>

<div class="form-row align-items-center">

    <div class="col-3 col-form-label">
            {{ form.password.label }}
    </div>
    <div class="col-9">
        <div class="input-group">
            {{ form.password(size=32, class="form-control") }}
            <div class="input-group-append">
                {{ form.submit(class="btn btn-outline-primary") }}
            </div>
        </div>
    </div>

    <div class="col-9 offset-3">
        <small class="form-text text-muted">
            Enter your current password to make changes.
            {% for error in form.password.errors %}
            <span style="color: red;">{{ error }}</span>
            {% endfor %}
        </small>
    </div>



    
</div>


</form>


{% endblock %}
