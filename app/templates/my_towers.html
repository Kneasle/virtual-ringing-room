{% extends 'base.html' %}

{% block app_content %}

<!-- Connect via SocketIO so that we can favorite/unfavorite things without refreshing -->
    <script>
        var socketio = io()
        var fav_tower = function(tower_id){
            console.log('favorited ' + tower_id);
            socketio.emit('c_toggle_favorite', tower_id);
            $('.' + tower_id + '_star').toggleClass('far').toggleClass('fas')
        };
    </script>


<h1>My Towers</h1>

<ul class="nav nav-tabs" id="tower_relation_nav" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active" 
           id="created_tab" 
           data-toggle="tab" 
           href="#created" 
           role="tab"
           aria-controls="created"
           aria-selected="true">
            Created
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link" 
           id="recent_tab" 
           data-toggle="tab" 
           href="#recent" 
           role="tab"
           aria-controls="recent"
           aria-selected="true">
            Recent
        </a>
    </li>
</ul>

<div class="tab-content" id="tower_relation_content">


<div class="tab-pane fade show active" 
     id="created"
     role="tabpanel"
     aria-labelledby="created_tab">
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">Name</th>
                <th scope="col">ID</th>
                <th scope="col">Visited</th>
            </tr>
        </thead>
        <tbody>
            {% for rel in tower_rels if rel.creator %}

            {% include '_my_tower_row.html' %}

            {% endfor %}
        </tbody>
    </table>
</div>

<div class="tab-pane fade" 
     id="recent"
     role="tabpanel"
     aria-labelledby="recent_tab">
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">Name</th>
                <th scope="col">ID</th>
                <th scope="col">Visited</th>
            </tr>
        </thead>
        <tbody>
            {% for rel in tower_rels if rel.recent %}

            {% include '_my_tower_row.html' %}

            {% endfor %}
        </tbody>
    </table>
</div>

</div>




{% endblock %}
